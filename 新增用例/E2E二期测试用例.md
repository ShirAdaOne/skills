# E2E二期测试用例

## 需求概述

本文档包含E2E二期的两个主要需求变更点的测试用例:

### 需求1: E2E泊出交互优化
- **变更1**: 新增E2E泊出地图创建弹窗 (PopupDisp=0x46)
- **变更2**: 泊出建图开启抑制Toast提示 (HAVPFunctTextDisp=0xAE/0xAF)
- **变更3**: 泊出建图过程引导文言 (HAVPFunctTextDisp=0xA2/0xA3)
- **变更4**: 泊出建图完成提示优化 (HAVPFunctTextDisp=0xAD)

### 需求2: 新增终点停车场卡片
- 导航中距离终点1.1km时显示匹配停车场卡片
- 用户可选择"无需泊入"切换至NOA
- SomeIp协议接口: OneclickNOASrv

---

## 测试用例列表

### 1. E2E泊出地图创建弹窗

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-001 | 泊车 | HMI | P0 | E2E泊出地图创建弹窗-主动推送 | 1. 车辆处于ready状态<br>2. 满足E2E泊出地图创建条件 | 无 | 1. 智驾域检测到满足条件<br>2. 观察仪表显示 | 域控发送PopupDisp=0x46:Can_Greate_Mooring_Map | 1. 仪表显示E2E泊出地图创建弹窗<br>2. 弹窗内容包含"创建泊出地图"相关提示<br>3. 显示"创建"按钮 | PopupDisp=0x46:Can_Greate_Mooring_Map接收成功 | 实车测试 | 适用CUX3.5及以上 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-002 | 泊车 | HMI | P0 | E2E泊出地图创建弹窗-用户点击创建 | 1. 弹窗已显示<br>2. 车辆处于ready状态 | PopupDisp=0x46:Can_Greate_Mooring_Map已发送 | 1. 用户点击弹窗中的"创建"按钮<br>2. 观察界面跳转 | HUT发送BtnEnaReq=0xD:Creat_Mooringout_Map | 1. 界面跳转到泊出地图创建界面<br>2. 显示建图引导提示 | BLC返回InterfaceDisTyp=0xC:Moored_Learning_Request | 实车测试 | 点击后进入建图流程 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-003 | 泊车 | HMI | P1 | E2E泊出地图创建弹窗-用户取消 | 1. 弹窗已显示<br>2. 车辆处于ready状态 | PopupDisp=0x46:Can_Greate_Mooring_Map已发送 | 1. 用户点击弹窗中的"取消"按钮<br>2. 观察弹窗状态 | 用户点击取消 | 1. 弹窗消失<br>2. 界面保持在当前状态<br>3. 不进入建图流程 | 无 | 实车测试 | 用户可取消操作 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-004 | 泊车 | HMI | P1 | E2E泊出地图创建弹窗-弹窗自动消失 | 1. 弹窗已显示<br>2. 车辆处于ready状态 | PopupDisp=0x46:Can_Greate_Mooring_Map已发送 | 1. 等待一定时间不操作<br>2. 观察弹窗状态 | 无 | 1. 弹窗在超时后自动消失<br>2. 界面保持在当前状态 | 无 | 实车测试 | 验证弹窗超时逻辑 | 业务逻辑层 |

### 2. 泊出建图开启抑制提示

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-005 | 泊车 | HMI | P0 | 泊出建图抑制-未泊入默认车位 | 1. 车辆未泊入默认车位<br>2. 用户尝试创建泊出地图 | 无 | 1. 进入泊出建图界面<br>2. 触发抑制条件 | 域控发送HAVPFunctTextDisp=0xAE:Please_park_in_the_default_slot | 1. 显示Toast提示:"请泊入默认车位,创建泊出暂不可用"<br>2. 创建按钮置灰不可用<br>3. Toast自动消失 | HAVPFunctTextDisp=0xAE:Please_park_in_the_default_slot | 实车测试 | 抑制条件:未泊入默认车位 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-006 | 泊车 | HMI | P0 | 泊出建图抑制-未收藏默认车位 | 1. 车辆未收藏默认车位<br>2. 用户尝试创建泊出地图 | 无 | 1. 进入泊出建图界面<br>2. 触发抑制条件 | 域控发送HAVPFunctTextDisp=0xAF:Please_save_and_park_in_the_default_slot | 1. 显示Toast提示:"请收藏一个默认车位并泊入,创建泊出暂不可用"<br>2. 创建按钮置灰不可用<br>3. Toast自动消失 | HAVPFunctTextDisp=0xAF:Please_save_and_park_in_the_default_slot | 实车测试 | 抑制条件:未收藏默认车位 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-007 | 泊车 | HMI | P1 | 泊出建图抑制-Toast显示时长 | 1. 触发抑制条件<br>2. Toast已显示 | HAVPFunctTextDisp=0xAE或0xAF已发送 | 1. 观察Toast显示时长<br>2. 记录显示时间 | 无 | 1. Toast显示3-5秒后自动消失<br>2. 消失后不影响其他操作 | 无 | 实车测试 | 验证Toast时长符合规范 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-008 | 泊车 | HMI | P1 | 泊出建图抑制-条件满足后可用 | 1. 初始抑制条件存在<br>2. 用户满足条件后再次尝试 | 抑制条件解除 | 1. 满足默认车位条件<br>2. 再次进入泊出建图界面 | 条件满足 | 1. 不再显示抑制Toast<br>2. 创建按钮恢复可用状态<br>3. 可以正常开始建图 | 无抑制信号 | 实车测试 | 验证抑制条件解除后功能恢复 | 业务逻辑层 |

### 3. 泊出建图过程引导

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-009 | 泊车 | HMI | P0 | 泊出建图-开始引导 | 1. 泊出建图已开启<br>2. 车辆处于默认车位 | InterfaceDisTyp=0xC:Moored_Learning_Request | 1. 开始泊出建图流程<br>2. 观察仪表显示和语音播报 | 域控发送HAVPFunctTextDisp=0xA:Start_parking_out | 1. 仪表显示常驻文言:"路线学习开始,请开往出口"<br>2. 语音播报:"路线学习开始,请开往出口"(单周期一次)<br>3. 显示建图进度指示 | HAVPFunctTextDisp=0xA:Start_parking_out | 实车测试 | 建图开始时播报一次 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-010 | 泊车 | HMI | P0 | 泊出建图-学习中引导 | 1. 泊出建图进行中<br>2. 车辆正在行驶 | 建图流程已开始 | 1. 车辆行驶过程中<br>2. 观察仪表显示 | 域控发送HAVPFunctTextDisp=0xB:Route_learning_parking_out | 1. 仪表显示常驻文言:"路线学习中,请开往出口"<br>2. 显示当前建图进度 | HAVPFunctTextDisp=0xB:Route_learning_parking_out | 实车测试 | 建图过程中持续显示 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-011 | 泊车 | HMI | P0 | 泊出建图-驶出停车场引导 | 1. 车辆行至停车场出口<br>2. 建图流程进行中 | 建图流程已开始 | 1. 车辆即将驶出停车场<br>2. 观察仪表显示和语音播报 | 域控发送HAVPFunctTextDisp=0xA2:Lead_Out_Parkinglot | 1. 仪表显示常驻文言:"请驶出停车场,进入公共道路"<br>2. 语音播报:"请驶出停车场,进入公共道路"(单周期一次)<br>3. 文言持续显示直到驶出 | HAVPFunctTextDisp=0xA2:Lead_Out_Parkinglot | 实车测试 | 通过道闸/搜星/地图判断 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-012 | 泊车 | HMI | P0 | 泊出建图-公共道路引导 | 1. 车辆已驶入公共道路<br>2. 建图流程进行中 | 车辆位置在公共道路 | 1. 车辆行驶在公共道路上<br>2. 观察仪表显示和语音播报 | 域控发送HAVPFunctTextDisp=0xA3:Drive_On | 1. 仪表显示常驻文言:"请继续行驶,学习将自动完成"<br>2. 语音播报:"请继续行驶,学习将自动完成"(单周期一次)<br>3. 显示剩余距离或进度 | HAVPFunctTextDisp=0xA3:Drive_On | 实车测试 | 引导用户继续行驶TBD米 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-013 | 泊车 | HMI | P1 | 泊出建图-语音播报单周期验证 | 1. 建图流程进行中<br>2. 各阶段引导文言触发 | 各阶段信号正常发送 | 1. 完整执行泊出建图流程<br>2. 记录各阶段语音播报次数 | 各阶段引导信号 | 1. 每个阶段的语音播报仅播报一次<br>2. 文言持续显示但语音不重复 | 各阶段信号单周期 | 实车测试 | 验证语音播报频率 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-014 | 泊车 | HMI | P1 | 泊出建图-引导文言切换 | 1. 建图流程进行中<br>2. 车辆在不同阶段 | 建图流程已开始 | 1. 车辆从停车场驶出到公共道路<br>2. 观察文言切换 | 域控按阶段发送不同引导信号 | 1. 文言按阶段正确切换<br>2. 切换时机准确(道闸/搜星/地图判断)<br>3. 无文言遗漏或重复 | 引导信号按阶段切换 | 实车测试 | 验证引导文言流程完整性 | 业务逻辑层 |

### 4. 泊出建图完成提示

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-015 | 泊车 | HMI | P0 | 泊出建图-完成提示 | 1. 泊出建图流程进行中<br>2. 车辆已行驶到公共道路指定距离 | 建图流程即将完成 | 1. 建图流程完成<br>2. 观察仪表显示和语音播报 | 域控发送HAVPFunctTextDisp=0xAD:The_route_is_completed | 1. 不显示建图完成页<br>2. 仪表显示文言:"完成泊出路线学习,支持从车位开启辅助驾驶到目的地"<br>3. 语音播报:"完成泊出路线学习,支持从车位开启辅助驾驶到目的地"(单周期一次)<br>4. 仪表显示成功图标 | HAVPFunctTextDisp=0xAD:The_route_is_completed | 实车测试 | 完成后不显示完成页 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-016 | 泊车 | HMI | P1 | 泊出建图-完成后界面退出 | 1. 建图完成提示已显示<br>2. 完成文言播报完毕 | HAVPFunctTextDisp=0xAD已发送 | 1. 等待提示显示完成<br>2. 观察界面状态 | 无 | 1. 提示显示后自动退出建图界面<br>2. 返回到泊车主界面或地图界面<br>3. 不显示建图完成页 | 无 | 实车测试 | 验证不显示完成页 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-017 | 泊车 | HMI | P1 | 泊出建图-完成后地图可用性 | 1. 泊出建图已完成<br>2. 车辆处于默认车位 | 泊出地图已保存 | 1. 再次进入泊车功能<br>2. 查看E2E泊出功能可用性 | 无 | 1. E2E泊出功能显示为可用状态<br>2. 可以正常激活E2E泊出<br>3. 显示已学习的路线 | 泊出地图状态可用 | 实车测试 | 验证地图保存成功 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-018 | 泊车 | HMI | P1 | 泊出建图-语音播报单次验证 | 1. 建图完成<br>2. 完成信号已发送 | HAVPFunctTextDisp=0xAD已发送 | 1. 观察语音播报<br>2. 等待一段时间 | 无 | 1. 完成语音仅播报一次<br>2. 后续不再重复播报<br>3. 文言显示后自动消失 | 单周期播报 | 实车测试 | 验证单周期播报逻辑 | 业务逻辑层 |

### 5. 终点停车场卡片显示

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-019 | 行车 | HMI | P0 | 终点停车场卡片-匹配显示 | 1. E2E导航进行中<br>2. 距离终点停车场≤1.1km<br>3. 已创建终点停车场地图 | POIStatus_Enum=1:match | 1. 车辆行驶到距离终点1.1km范围内<br>2. 观察中控屏显示 | ADC发送ParkDestinationE2E,POIStatus_Enum=1:match(一帧) | 1. 中控屏显示终点停车场卡片<br>2. 卡片包含E2E图标<br>3. 标题显示:"匹配到终点停车场"<br>4. 正文显示:"到达终点将泊入[停车场名称]的默认车位"<br>5. 显示"无需泊入"按钮 | POIStatus_Enum=1:match接收成功 | 实车测试 | 距离≤1.1km时显示 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-020 | 行车 | HMI | P0 | 终点停车场卡片-停车场名称显示 | 1. 卡片已显示<br>2. 停车场名称≤20字 | POIStatus_Enum=1:match,停车场名称已发送 | 1. 观察卡片正文内容<br>2. 确认停车场名称 | 停车场名称信息 | 1. 正文完整显示停车场名称<br>2. 名称显示清晰可读<br>3. 格式为"到达终点将泊入[停车场名称]的默认车位" | 停车场名称正确显示 | 实车测试 | 名称≤20字完整显示 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-021 | 行车 | HMI | P0 | 终点停车场卡片-长名称省略显示 | 1. 卡片已显示<br>2. 停车场名称>20字 | POIStatus_Enum=1:match,长停车场名称已发送 | 1. 观察卡片正文内容<br>2. 确认名称显示格式 | 停车场名称信息(>20字) | 1. 名称显示前20个字<br>2. 第20个字后部分显示为"..."<br>3. 格式为"到达终点将泊入[前20字]...的默认车位" | 停车场名称截断显示 | 实车测试 | 名称>20字时截断 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-022 | 行车 | HMI | P1 | 终点停车场卡片-距离边界验证 | 1. E2E导航进行中<br>2. 车辆距离终点1.11km | 距离刚好超过1.1km | 1. 车辆行驶接近1.1km边界<br>2. 观察卡片显示时机 | 距离监测 | 1. 距离>1.1km时不显示卡片<br>2. 距离≤1.1km时立即显示卡片<br>3. 显示时机准确 | 距离判断逻辑 | 实车测试 | 验证1.1km边界条件 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-023 | 行车 | HMI | P1 | 终点停车场卡片-信号发送验证 | 1. 满足卡片显示条件<br>2. 域控准备发送信号 | 条件满足 | 1. 触发显示条件<br>2. 检测信号发送 | ADC发送POIStatus_Enum=1:match | 1. 信号仅发送一帧<br>2. 不重复发送<br>3. 卡片正确显示 | 信号发送一帧 | 实车测试 | 验证信号发送频率 | 业务逻辑层 |

### 6. 终点停车场卡片-用户交互

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-024 | 行车 | HMI | P0 | 终点停车场卡片-点击无需泊入 | 1. 卡片已显示<br>2. E2E功能激活中 | POIStatus_Enum=1:match | 1. 用户点击卡片上的"无需泊入"按钮<br>2. 观察功能切换和提示 | HUT发送NoParkingReq_Enum=0:No_Parking | 1. E2E功能切换到NOA<br>2. 仪表显示文言:"已切换NOA"<br>3. 语音播报:"已切换NOA"<br>4. 卡片消失 | ADC收到信号切换到NOA,TeTextSceneBrocast=0x15:Downgrade_TO_NOA | 实车测试 | 点击后切换到NOA | 业务逻辑层 |
| BFO-HMI-GWM-E2E-025 | 行车 | HMI | P0 | 终点停车场卡片-切换NOA后功能抑制 | 1. 已点击"无需泊入"<br>2. 已切换到NOA | E2E已切换到NOA | 1. 尝试重新激活E2E<br>2. 观察功能可用性 | 尝试激活E2E | 1. E2E功能显示不可用<br>2. 本次导航周期无法激活E2E<br>3. 提示需要重新下发导航 | E2E功能抑制 | 实车测试 | 本次导航周期不可重新激活 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-026 | 行车 | HMI | P1 | 终点停车场卡片-重新导航后恢复 | 1. 已切换到NOA<br>2. E2E功能被抑制 | E2E本次导航不可用 | 1. 重新下发导航<br>2. 观察E2E功能可用性 | 重新下发导航 | 1. E2E功能恢复可用状态<br>2. 满足条件时可以正常激活E2E<br>3. 满足条件时再次显示卡片 | 功能恢复可用 | 实车测试 | 重新导航后功能恢复 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-027 | 行车 | HMI | P1 | 终点停车场卡片-切换文言显示时长 | 1. 已点击"无需泊入"<br>2. 切换文言已显示 | TeTextSceneBrocast=0x15已发送 | 1. 观察切换文言显示时长<br>2. 记录显示时间 | 无 | 1. 文言显示3-5秒后自动消失<br>2. 消失后界面恢复正常 | 文言自动消失 | 实车测试 | 验证文言显示时长 | 业务逻辑层 |

### 7. 终点停车场卡片-特殊场景

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-028 | 行车 | HMI | P0 | 终点停车场卡片-中途不匹配 | 1. 卡片已显示<br>2. 车辆行驶中 | POIStatus_Enum=1:match | 1. 车辆行驶过程中偏离路线<br>2. 不再满足匹配条件 | ADC发送POIStatus_Enum=0:no_match(一帧) | 1. 卡片立即消失<br>2. 不再显示停车场信息<br>3. E2E功能保持当前状态 | POIStatus_Enum=0:no_match | 实车测试 | 中途不匹配时卡片消失 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-029 | 行车 | HMI | P0 | 终点停车场卡片-导航偏航重新匹配 | 1. 导航偏航<br>2. 重新规划路线 | 偏航后重新规划 | 1. 车辆偏航后重新规划<br>2. 再次进入1.1km范围内 | 满足距离<1.1km条件,ADC重新发送POIStatus_Enum=1:match(一帧) | 1. 重新显示停车场卡片<br>2. 卡片内容与之前一致<br>3. "无需泊入"按钮可用 | POIStatus_Enum=1:match重新发送 | 实车测试 | 偏航后重新判断条件 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-030 | 行车 | HMI | P0 | 终点停车场卡片-导航偏航不满足条件 | 1. 导航偏航<br>2. 重新规划路线后距离>1.1km | 偏航后距离不满足 | 1. 车辆偏航后重新规划<br>2. 距离终点>1.1km | 距离>1.1km | 1. 不发送匹配信号<br>2. 卡片不显示<br>3. 等待距离满足条件 | 不发送POIStatus_Enum=1:match | 实车测试 | 偏航后不满足条件 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-031 | 行车 | HMI | P0 | 终点停车场卡片-切换到泊车后不显示 | 1. 行车模式,卡片已显示<br>2. 车辆接近终点 | POIStatus_Enum=1:match | 1. 行车切换到泊车模式<br>2. 观察卡片状态 | 行车切换到泊车,ADC发送POIStatus_Enum=0:no_match(一帧) | 1. 卡片立即消失<br>2. 进入泊车界面<br>3. 不再显示停车场卡片 | POIStatus_Enum=0:no_match | 实车测试 | 切换到泊车后卡片消失 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-032 | 行车 | HMI | P1 | 终点停车场卡片-SomeIp协议验证 | 1. 满足卡片显示条件<br>2. 协议版本为V3.9.1及以上 | SomeIp V3.9.1+ | 1. 检查SomeIp信号<br>2. 验证协议字段 | ServiceInterfaceName:OneclickNOASrv<br>EventgroupName:egMatchDestPrkgSts | 1. 协议接口正确<br>2. 信号字段完整<br>3. 数据类型正确(ParkingCtrl,NoParkingReq_Enum) | SomeIp协议正确 | 实车测试 | 验证SomeIp协议规范 | 系统层 |
| BFO-HMI-GWM-E2E-033 | 行车 | HMI | P1 | 终点停车场卡片-重复匹配验证 | 1. 车辆在1.1km范围内<br>2. 已显示卡片 | POIStatus_Enum=1:match | 1. 车辆持续在1.1km范围内行驶<br>2. 观察信号发送和卡片显示 | 域控监测 | 1. 匹配信号仅发送一次<br>2. 卡片持续显示不闪烁<br>3. 不重复发送匹配信号 | 信号不重复发送 | 实车测试 | 验证信号发送逻辑 | 业务逻辑层 |

### 8. E2E功能联动测试

| 用例编号 | 功能类型 | 分组 | 用例分级 | 用例名称 | 预置条件 | 预置条件-信号描述 | 测试步骤 | 测试步骤-信号描述 | 预期结果 | 预期结果-信号描述 | 标签信息 | 备注 | 层级 |
|---------|---------|------|----------|----------|----------|------------------|----------|------------------|----------|------------------|----------|------|------|
| BFO-HMI-GWM-E2E-034 | 泊车 | HMI | P0 | E2E完整流程-建图到激活 | 1. 未创建泊出地图<br>2. 车辆处于默认车位 | 无泊出地图 | 1. 完成泊出地图创建<br>2. 下次从车位激活E2E | 完整建图流程+激活E2E | 1. 建图流程完整顺利<br>2. 建图完成后地图可用<br>3. 可以正常激活E2E功能<br>4. 各阶段文言和语音正确 | 完整流程信号正确 | 实车测试 | 验证端到端流程 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-035 | 泊车 | HMI | P0 | E2E完整流程-激活到泊入 | 1. 泊出地图已创建<br>2. 设置导航到终点停车场 | E2E地图可用 | 1. 从车位激活E2E<br>2. 导航到终点停车场<br>3. 自动泊入 | 完整E2E流程 | 1. E2E成功激活<br>2. 行驶过程正常<br>3. 匹配到终点停车场显示卡片<br>4. 自动泊入默认车位成功 | 完整流程信号正确 | 实车测试 | 验证E2E完整体验 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-036 | 泊车 | HMI | P1 | E2E完整流程-选择无需泊入 | 1. E2E导航进行中<br>2. 显示终点停车场卡片 | POIStatus_Enum=1:match | 1. 点击"无需泊入"<br>2. 切换到NOA继续行驶 | 切换到NOA | 1. 成功切换到NOA<br>2. 切换文言和语音正确<br>3. E2E功能被抑制<br>4. 重新导航后功能恢复 | 功能切换正确 | 实车测试 | 验证用户取消泊入流程 | 业务逻辑层 |
| BFO-HMI-GWM-E2E-037 | 泊车 | HMI | P1 | E2E建图失败-重新建图 | 1. 泊出建图进行中<br>2. 建图失败 | 建图失败 | 1. 建图失败后返回<br>2. 重新尝试建图 | 重新创建地图 | 1. 可以重新开始建图流程<br>2. 重新建图流程正常<br>3. 建图成功后地图可用 | 支持重新建图 | 实车测试 | 验证失败后可重试 | 业务逻辑层 |

---

## 测试覆盖总结

### 按功能分类
- E2E泊出地图创建弹窗: 4个用例
- 泊出建图开启抑制提示: 4个用例
- 泊出建图过程引导: 6个用例
- 泊出建图完成提示: 4个用例
- 终点停车场卡片显示: 5个用例
- 终点停车场卡片-用户交互: 4个用例
- 终点停车场卡片-特殊场景: 6个用例
- E2E功能联动测试: 4个用例

### 按优先级分类
- P0级别: 27个用例
- P1级别: 10个用例

**总计: 37个测试用例**

---

## 信号定义参考

### E2E泊出交互相关信号

#### 新增信号

| 信号名称 | 信号值 | 文言内容 | 使用场景 | 播报频率 |
|---------|-------|---------|---------|---------|
| PopupDisp | 0x46: Can_Greate_Mooring_Map | 无 | 主动推送E2E泊出地图创建弹窗 | 一次 |
| HAVPFunctTextDisp | 0xAE: Please_park_in_the_default_slot | 请泊入默认车位,创建泊出暂不可用 | 泊出建图开启抑制 | Toast |
| HAVPFunctTextDisp | 0xAF: Please_save_and_park_in_the_default_slot | 请收藏一个默认车位并泊入,创建泊出暂不可用 | 泊出建图开启抑制 | Toast |
| HAVPFunctTextDisp | 0xAD: The_route_is_completed | 完成泊出路线学习,支持从车位开启辅助驾驶到目的地 | 泊出建图完成 | 单周期一次 |

#### 复用信号

| 信号名称 | 信号值 | 文言内容 | 使用场景 | 播报频率 |
|---------|-------|---------|---------|---------|
| HAVPFunctTextDisp | 0xA: Start_parking_out | 路线学习开始,请开往出口 | 泊出建图开始 | 单周期一次 |
| HAVPFunctTextDisp | 0xB: Route_learning_parking_out | 路线学习中,请开往出口 | 泊出建图进行中 | 持续显示 |
| HAVPFunctTextDisp | 0xA2: Lead_Out_Parkinglot | 请驶出停车场,进入公共道路 | 泊出建图-驶出停车场 | 单周期一次 |
| HAVPFunctTextDisp | 0xA3: Drive_On | 请继续行驶,学习将自动完成 | 泊出建图-公共道路 | 单周期一次 |
| BtnEnaReq | 0xD: Creat_Mooringout_Map | 无 | 用户点击创建泊出地图 | 用户操作 |
| InterfaceDisTyp | 0xC: Moored_Learning_Request | 无 | 进入泊出地图创建界面 | 状态反馈 |

### 终点停车场卡片相关信号

#### SomeIp协议信号

| 协议字段 | 值 | 说明 |
|---------|---|------|
| ServiceInterfaceName | OneclickNOASrv | 服务接口名称 |
| EventgroupName | egMatchDestPrkgSts | 事件组名称 |
| ElementName | ParkingCtrl | 元素名称 |
| DatatypeReference | NoParkingReq_Enum | 数据类型引用 |
| POIStatus_Enum | 1: match | 匹配到终点停车场(发送一帧) |
| POIStatus_Enum | 0: no_match | 未匹配到终点停车场(发送一帧) |
| NoParkingReq_Enum | 0: No_Parking | 用户点击"无需泊入" |
| TeTextSceneBrocast | 0x15: Downgrade_TO_NOA | 已切换NOA |

---

## 测试注意事项

### 关键验证点

#### E2E泊出交互
1. **单周期播报验证**: 确保0xA, 0xA2, 0xA3, 0xAD信号对应的语音仅播报一次
2. **文言持续显示**: 文言在界面持续显示,但语音不重复播报
3. **抑制条件验证**: 验证0xAE和0xAF两种抑制场景的Toast显示
4. **不显示完成页**: 建图完成后不显示完成页,只显示文言提示
5. **引导流程完整性**: 验证从停车场到公共道路的引导文言切换时机

#### 终点停车场卡片
1. **距离边界验证**: 严格验证1.1km的距离边界条件
2. **信号发送频率**: 匹配和不匹配信号均只发送一帧
3. **停车场名称处理**: 验证≤20字完整显示,>20字截断为"..."
4. **功能抑制逻辑**: 点击"无需泊入"后本次导航周期不可重新激活E2E
5. **偏航处理**: 验证偏航后重新判断条件的逻辑
6. **行泊切换**: 行车切换到泊车后卡片消失且发送no_match信号

### 测试环境要求

#### 硬件环境
- 车型: GWM/ADC40
- 座舱版本: CUX3.5及以上
- SomeIp协议版本: V3.9.1及以上

#### 软件环境
- E2E功能开关已开启
- 导航功能正常
- 已收藏默认车位(用于泊出建图测试)

#### 测试场景
- 真实停车场环境(含道闸)
- 公共道路环境(用于建图完成)
- 导航路线包含终点停车场(用于卡片测试)

### 测试工具
- 信号监测工具(验证SomeIp信号)
- 录屏工具(记录HMI显示和语音播报)
- GPS定位工具(验证距离判断)
- 日志抓取工具(分析问题定位)

---

**文档版本**: v1.0  
**创建日期**: 2026-01-26  
**适用车型**: GWM/ADC40  
**座舱版本**: CUX3.5及以上  
**协议版本**: SomeIp V3.9.1及以上
