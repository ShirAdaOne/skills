# VLA泊车测试用例需求文档覆盖分析报告

## 分析概述

**分析日期**：2026-01-26  
**已生成用例数**：151个  
**分析文档**：
1. 泊车HAVP_HMI交互规范_V1.0_20251118.pdf（88页）
2. VLA漫游泊车指令_202511.xlsx（2个工作表，200+行）

---

## 一、泊车HAVP_HMI交互规范覆盖情况

### 1.1 已完整覆盖的章节 ✅

#### 第3章：开关设置项
- ✅ **3.1 记忆泊车功能开关**
  - 覆盖用例：BFO-HMI-Thor-VLA-042（功能开关关闭Toast提示）
  - 信号：HAVPfunctionReq, HAVPfunctionSts

- ✅ **3.2 后台静默建图开关**
  - 覆盖用例：BFO-HMI-Thor-VLA-066~074（静默建图系列）
  - 信号：AutoPushReq, AutoPushSts

#### 第4章：功能开启
- ✅ **4.1 功能入口**（功能按键/语音激活/主动推送）
  - 覆盖用例：BFO-HMI-Thor-VLA-003~009（引导界面、人驾界面激活）
  - 覆盖用例：BFO-HMI-Thor-VLA-064~065（主动推送-预留）

- ✅ **4.3 功能开启异常**（17种异常场景全覆盖）
  - 覆盖用例：BFO-HMI-Thor-VLA-042~063（22个异常用例）
  - 涵盖：车控车关、坡道过大、ODD范围、摄像头遮挡/故障、雷达故障、系统故障、主动安全功能激活、胎压异常、光照/雨量、驾驶模式、代客模式、挂车、差速锁等

#### 第5章：泊入地图创建（VLA场景部分适用）
- ⚠️ **部分覆盖**：
  - ✅ APA选车位阶段：BFO-HMI-Thor-VLA-015~019（无目的漫游-APA选车位）
  - ✅ 建图抑制：BFO-HMI-Thor-VLA-033~041（漫游抑制-不使能条件）
  - ✅ 建图异常退出：BFO-HMI-Thor-VLA-092~126（漫游异常退出系列）
  - ❌ **传统记忆泊车建图流程**：未覆盖（如果VLA需要）

#### 第6章：地图和停车场管理
- ⚠️ **部分覆盖**：
  - ✅ 2D地图显示：BFO-HMI-Thor-VLA-023~026（有图场景2D库位管理）
  - ✅ POI信息显示：BFO-HMI-Thor-VLA-145~147（出入口、充电桩车位）
  - ❌ **地图命名/编辑/删除**：未覆盖

### 1.2 部分覆盖或未覆盖的内容 ⚠️

#### 未覆盖功能（如果VLA需要）
1. ❌ **3.3 智驾隐私定位权限逻辑**
   - 定位授权弹窗
   - PrivacySts, ADAS_gpsAuthSys, MapStatus信号
   - **建议**：如VLA功能也需要定位权限，需补充2-3个用例

2. ❌ **4.4 用户教学指导**（CUX3.5需求）
   - 使用说明入口
   - 创建泊入说明
   - **建议**：补充1-2个用例

3. ❌ **传统记忆泊车建图完整流程**
   - 开始创建地图
   - 建图中界面显示
   - 路线保存流程（30s保存）
   - 完成页面统计信息
   - **说明**：如VLA也需要传统建图（非静默建图），需补充10+个用例

4. ❌ **地图管理详细功能**
   - 地图重命名
   - 地图删除（含确认弹窗）
   - 停车场位置信息获取和扎标
   - **建议**：补充3-5个用例

5. ❌ **路线扩建详细逻辑**
   - 扩建地图按键（UpdateRouteBtnDisp）
   - 扩建完成确认
   - **说明**：已有BFO-HMI-Thor-VLA-140~144覆盖基础扩建场景

---

## 二、VLA漫游泊车指令Excel覆盖情况

### 2.1 Sheet1基本指令覆盖情况

| 序号 | 指令类型 | 语音指令示例 | 覆盖情况 | 对应用例编号 |
|------|---------|------------|----------|------------|
| 1 | 功能开启 | 开启漫游泊车 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-133 |
| 2 | 去X楼层 | 去B1层 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-134 |
| 3 | 去X楼层泊车 | 去B1层泊车 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-021, 134 |
| 4 | 泊入默认车位 | - | ✅ 已覆盖 | BFO-HMI-Thor-VLA-135 |
| 5 | 泊入充电桩车位 | - | ✅ 已覆盖 | BFO-HMI-Thor-VLA-136 |
| 6 | 驶出出口 | - | ✅ 已覆盖 | BFO-HMI-Thor-VLA-020 |
| 7 | 巡航停车 | - | ✅ 已覆盖 | BFO-HMI-Thor-VLA-137 |
| 8 | 路边停靠 | - | ❌ **未覆盖** | **需补充** |
| 9 | 继续巡航 | - | ✅ 已覆盖 | BFO-HMI-Thor-VLA-088, 089 |
| 10 | 沿途/就近泊车 | - | ✅ 已覆盖 | BFO-HMI-Thor-VLA-138 |
| 11 | 掉头 | - | ❌ **未覆盖** | **需补充** |
| 12 | 左转 | - | ❌ **未覆盖** | **需补充** |
| 13 | 右转 | - | ❌ **未覆盖** | **需补充** |
| 14 | 直行 | - | ❌ **未覆盖** | **需补充** |
| 15 | 快一点 | - | ❌ **未覆盖** | **需补充** |
| 16 | 慢一点 | - | ❌ **未覆盖** | **需补充** |
| 17 | 指定速度调节 | - | ⚠️ **部分覆盖** | BFO-HMI-Thor-VLA-073（速度范围限制） |

**Sheet1覆盖率**：10/17 = **58.8%**

### 2.2 Sheet2详细场景覆盖情况

#### 开启功能/修改目的地类指令

| 序号 | 用户场景 | 语音泛化示例 | 覆盖情况 | 对应用例编号 |
|------|---------|------------|----------|------------|
| 1 | 无目的地指令 | 帮我扫图、漫游泊车 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-008, 009, 133 |
| 2 | 任意车位 | 漫游找车位 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-083~086（沿途泊车） |
| 3 | **区域车位** | 帮我泊入A区车位 | ❌ **未覆盖** | **需补充（A~J区）** |
| 4 | 楼层车位 | 帮我停到B1层车位 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-021, 134 |
| 5 | 默认车位 | 帮我泊入默认车位 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-028, 135 |
| 6 | 充电桩车位 | 泊入充电桩车位 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-030, 136 |
| 7 | **电梯旁车位** | 帮我泊入电梯旁车位 | ❌ **未覆盖** | **需补充** |
| 8 | **楼梯附近车位** | 帮我泊入楼梯附近车位 | ❌ **未覆盖** | **需补充** |
| 9 | **商场车位** | 帮我泊入商场附近车位 | ❌ **未覆盖** | **需补充** |

#### 目的地寻找指令

| 序号 | 用户场景 | 语音泛化示例 | 覆盖情况 | 对应用例编号 |
|------|---------|------------|----------|------------|
| 1 | 楼层 | 帮我去B1层 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-021, 134 |
| 2 | **区域** | 帮我停在A区 | ❌ **未覆盖** | **需补充（A~J区）** |
| 3 | 驶出停车楼 | 帮我驶离停车场 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-020, 029 |

#### 控车中指令

| 序号 | 用户场景 | 语音泛化示例 | 覆盖情况 | 对应用例编号 |
|------|---------|------------|----------|------------|
| 1 | 直接停车 | 帮我停车、刹停 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-087, 137 |
| 2 | **路边停靠** | 前面路边停车、靠边停车 | ❌ **未覆盖** | **需补充** |
| 3 | 沿途泊车 | 就近泊车、附近泊车 | ✅ 已覆盖 | BFO-HMI-Thor-VLA-083~086, 138 |
| 4 | **倒车** | - | ❌ **未覆盖** | **需补充** |
| 5 | **掉头** | 掉头、换方向 | ❌ **未覆盖** | **需补充** |
| 6 | **左转** | 前方路口左转 | ❌ **未覆盖** | **需补充** |
| 7 | **右转** | 前方路口右转 | ❌ **未覆盖** | **需补充** |
| 8 | **直行** | 前方路口直行 | ❌ **未覆盖** | **需补充** |
| 9 | **快一点** | 快一点、加速 | ❌ **未覆盖** | **需补充** |
| 10 | **慢一点** | 慢一点、减速 | ❌ **未覆盖** | **需补充** |

**Sheet2覆盖率**：约 9/22 = **40.9%**

---

## 三、遗漏功能汇总与补充建议

### 3.1 高优先级遗漏（建议立即补充）

#### 语音控车指令遗漏（P0级别）
1. ⚠️ **转向控制指令**（4个用例）
   - 掉头/换方向指令
   - 前方路口左转指令
   - 前方路口右转指令
   - 前方路口直行指令
   - **Intent**: VLA_steering_setting
   - **Slots**: SteeringType_u_turn / left / right / straight

2. ⚠️ **速度调节指令**（2个用例）
   - 快一点/加速指令
   - 慢一点/减速指令
   - **Intent**: VLA_speed_setting
   - **Slots**: AccelerationType_up / down

3. ⚠️ **路边停靠指令**（1个用例）
   - 前面路边停车/靠边停车
   - **Intent**: VLA_stop_driving
   - **Slots**: StopDrivingType_PullOver

#### 区域相关指令遗漏（P0/P1级别）
4. ⚠️ **区域车位指令**（3个用例）
   - 泊入A区车位（A~J区，至少测试A、B、J区）
   - **Intent**: VLA_INTENT_PARK_IN
   - **Slots**: parking_area="A区"~"J区"

5. ⚠️ **区域寻找指令**（2个用例）
   - 去A区（寻找目的地）
   - **Intent**: VLA_INTENT_PARK_SEARCH
   - **Slots**: parking_area

#### POI车位指令遗漏（P1级别）
6. ⚠️ **特殊POI车位**（3个用例）
   - 电梯旁车位
   - 楼梯附近车位
   - 商场车位
   - **Intent**: VLA_INTENT_PARK_IN
   - **Slots**: PARKING_POSITION_LIFT / STAIR / MARKET

#### 其他语音指令遗漏（P1级别）
7. ⚠️ **倒车指令**（1个用例）
   - 倒车指令
   - **Intent**: VLA_driving_setting
   - **Slots**: backward_driving_distance=0

### 3.2 中优先级遗漏（可后续补充）

8. ⚠️ **定位权限相关**（2-3个用例）
   - 定位授权弹窗处理
   - 定位权限关闭后功能开启异常

9. ⚠️ **用户教学指导**（CUX3.5需求，1-2个用例）
   - 使用说明入口
   - 创建泊入说明页面

10. ⚠️ **地图管理功能**（3-5个用例）
    - 地图重命名
    - 地图删除（含确认）
    - 停车场位置信息获取

### 3.3 低优先级遗漏（视需求决定）

11. ⚠️ **传统记忆泊车建图流程**（10+个用例）
    - 如VLA也需要传统建图，需补充完整建图流程测试用例
    - 包括：开始创建地图、建图中显示、路线保存、完成页面等

---

## 四、覆盖率总结

### 4.1 整体覆盖情况

| 文档类型 | 主要内容 | 已覆盖 | 未覆盖/部分覆盖 | 覆盖率 |
|---------|---------|-------|---------------|-------|
| HAVP规范（88页） | 核心HMI交互规范 | 约70页内容 | 约18页内容 | **~80%** |
| VLA指令Sheet1 | 基本语音指令（17条） | 10条 | 7条 | **58.8%** |
| VLA指令Sheet2 | 详细场景（22个场景） | 9个 | 13个 | **40.9%** |
| **综合覆盖率** | - | - | - | **约65-70%** |

### 4.2 已生成用例分布

- ✅ **核心功能流程**：42个用例（功能开启、激活、完成）
- ✅ **异常处理**：58个用例（功能开启异常、漫游抑制、异常退出）
- ✅ **核心交互**：32个用例（沿途泊车、暂停继续、APA选车位）
- ✅ **辅助功能**：20个用例（COT、POI显示、扩建地图等）
- ⚠️ **语音控车**：8个用例（**但遗漏11条指令**）

### 4.3 建议补充用例数量

| 优先级 | 功能类型 | 建议用例数 | 预计耗时 |
|-------|---------|-----------|---------|
| **P0高优先级** | 转向控制、速度调节、路边停靠 | 7个 | 0.5天 |
| **P0/P1** | 区域车位、区域寻找 | 5个 | 0.5天 |
| **P1中优先级** | 特殊POI车位、倒车指令 | 4个 | 0.3天 |
| **P1** | 定位权限、用户教学、地图管理 | 7-10个 | 1天 |
| **P2低优先级** | 传统建图流程（视需求） | 10-15个 | 1.5天 |
| **总计** | - | **23-41个** | **2-4天** |

---

## 五、补充建议优先级

### 立即补充（P0）
1. ✅ **转向控制指令**（掉头、左转、右转、直行）- 4个用例
2. ✅ **速度调节指令**（快一点、慢一点）- 2个用例
3. ✅ **路边停靠指令** - 1个用例

### 第二批补充（P0/P1）
4. ✅ **区域车位和区域寻找**（A~J区）- 5个用例

### 第三批补充（P1）
5. ✅ **特殊POI车位**（电梯旁、楼梯附近、商场）- 3个用例
6. ✅ **倒车指令** - 1个用例
7. ✅ **定位权限逻辑** - 2-3个用例

### 可选补充（视需求）
8. ⚠️ **用户教学指导** - 1-2个用例
9. ⚠️ **地图管理功能** - 3-5个用例
10. ⚠️ **传统建图流程** - 10-15个用例（如VLA需要）

---

## 六、结论

### 已有成果 ✅
- ✅ **核心VLA漫游泊车流程**覆盖完整（无图漫游、有图巡航）
- ✅ **三大变更修复**全覆盖验证（44个专项用例）
- ✅ **异常处理和退出**覆盖全面（58个异常用例）
- ✅ **基础语音控车**覆盖主要场景（8个用例）
- ✅ **辅助功能**覆盖较好（COT、POI、扩建地图）

### 主要遗漏 ⚠️
- ❌ **语音控车指令**遗漏较多（11条指令，特别是转向和速度调节）
- ❌ **区域相关功能**未覆盖（A~J区车位和寻找）
- ❌ **特殊POI车位**未覆盖（电梯旁、楼梯、商场）
- ❌ **地图管理功能**未覆盖（重命名、删除等）

### 推荐行动方案 📋
1. **立即补充**：语音控车核心指令（7个P0用例）- 预计0.5天
2. **一周内补充**：区域功能和POI车位（8个P0/P1用例）- 预计0.8天
3. **视需求补充**：地图管理、定位权限、用户教学（10+个P1用例）- 预计1-1.5天

**当前完成度评估**：约65-70%覆盖  
**补充后预期完成度**：约85-90%覆盖（补充高优先级后）  
**完全覆盖预期完成度**：95%+（补充所有遗漏项后）

---

**报告生成日期**：2026-01-26  
**分析人员**：Claude (AI Assistant)  
**文档状态**：待审核与补充  

✅ **核心功能已充分覆盖，建议优先补充语音控车指令！**
